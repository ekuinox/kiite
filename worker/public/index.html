<div>
    <input placeholder="trackId or url" type="text" id="target-track-id">
    <button id="submit">聴かせる</button>
    <p id="result"></p>
    <script>
        const button = document.getElementById('submit');
        button.addEventListener('click', () => {
            let trackId = document.getElementById('target-track-id').value;
            if (trackId.startsWith('https')) {
                const url = new URL(trackId);
                const paths = url.pathname.split('/');
                trackId = paths[paths.length - 1];
            }
            fetch('http:///127.0.0.1:8787/api/users/lm0x/playing').then((r) => {
                document.getElementById('result').innerText = r.ok ? 'OK' : 'Err';
            });

            fetch('http:///127.0.0.1:8787/api/users/lm0x/queue?trackId=' + trackId, { method: 'POST' }).then((r) => {
                document.getElementById('result').innerText = r.ok ? 'OK' : 'Err';
            });
        });
    </script>
    <a href="/">back</a>
</div>